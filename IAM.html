IAMとは

    AWS Identity and Access Management (IAM)は安全にAWS操作を実施するための認証・認可の仕組み

    内容

        ・AWS利用者認証の実施
        ・アクセスポリシーの設定
        ・ユーサー個人またはグループ毎に設定

ルートユーザー

    最初に作成されるのがルートユーザーであり、通常の管理には利用しないアカウント

    内容

        ・AWSアカウント作成時に作られるIDアカウント
        ・全てのAWSサービスとリソースを使用できる権限を有するユーザー
        ・日常的なタスクはルートユーザーを使用しないことが強く推奨される

        ※パワーユーザーはIAMユーザーやグループの管理以外の全てのAWS
        サービスにフルアクセス権限を有するユーザーで別もの

    ルートユーザーにしかできない操作権限

        ・AWSルートアカウントのメールアドレスやパスワードの変更
        ・IAMユーザーの課金情報へのアクセスに関するactivate/desctivate
        ・他のAWSアカウントへのRoute53のドメイン登録の移行
        ・CloudFrontのキーペアの作成
        ・AWSサービス（サポート等）のキャンセル
        ・AWSアカウントの停止
        ・コンソリデイティドビリングの設定
        ・脆弱性診断おフォームの提出
        ・逆引きDNS申請

IAMユーザー

    IAMポリシー内でAWSサービスを利用できるユーザー。
    基本操作はIAMユーザーで実施することになる。

    個人ユーザー

        設定上限

            1アカウントで5000ユーザーまで作成可能

        設計内容

            ユーザー名

            パス（オプション）

                ユーザーにオプションとしてセットできる情報
                パスを元にユーザーの検索が可能
                組織階級やプロジェクトなどのをセット

            所属グループ

                10のグループまで設定可能

            パーミッション

                AWSサービスへのアクセス権限

    グループユーザー

        設定上限

            1アカウントで100グループまで作成可能

        設計内容

            グループ名

            パス（オプション）

                組織階級などをセット

            パーミッション

                グループに設定したパーミッションはIAMユーザーに
                付与したパーミッションと同時に評価

    ロール

        AWSリソースに対してアクセス権限をロールとして付与できる

IAMポリシー

    IAMポリシーを作成してユーザーなどへのアクセス権限を付与（JSON形式の文書）

    管理ポリシー

        AWS管理ポリシー

            AWSが作成および管理する管理ポリシー

        カスタム管理ポリシー

            AWSアカウントで作成・管理する管理ポリシー
            同じポリシーを複数のIAMエンティティにアタッチできる

        インラインポリシー

            1つのプリンシパルエンティティ（ユーザー、グループまたはロール）に埋め込まれたポリシーで、
            プリンシパルエンティティにアタッチすることができる

    JSON形式

        Effect

            Allow→許可
            Deny→拒否

        Action

            対象のAWSサービス　例：s3 Get

        Resource

            対象のAWSリソースARNで記述

        Condition

            アクセス制御が有効となる条件

ユーザーのアクティビティの記録

    Access AdvisorのService Last Accessed Date

        IAMエンティティ（ユーザー、グループ、ロール）が、最後にAWSサービスにアクセスした
        日時と時刻を表示する機能

    Credential Report

        利用日時などが記録されたiframe認証情報に係るレポートファイル

    AWS Config

        IAMのUser、Group、Role、Policyに関して変更履歴、構成変更を管理・確認
        することができる機能

    AWS CloudTrail

        AWSインフラストラクチャ全体でアカウントアクティビティをログに記録し、
        継続的に監視し、保持することができる機能

    アクセス権限の一時付与

        AWS Security Token Service (STS)

            動的にIAMユーザーを作り、一時的に利用する
            トークンを発行するサービス

        Temporary Security Credentials

            AWSに対して一時的な認証情報を作成する仕組み
